<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->

<configuration>
	<connectionStrings />

	<system.web>
		<compilation debug="true" targetFramework="4.0">
			<assemblies>
				<add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
				<add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
				<add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
				<add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
				<add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
			</assemblies>
		</compilation>

		<!--
			2012-07-14 DWR: Having to set trust level to full to prevent "Inheritance security rules violated while overriding member" exception caused
			by EnglishPluralityStringNormaliser ISerializable.GetObjectData despite it having the SecurityCritical attribute set to match ISerializable
		-->
		<trust level="Full"/>
		<customErrors mode="On" defaultRedirect="~/Error" />

        <pages>
			<namespaces>
				<add namespace="System.Web.Mvc" />
				<add namespace="System.Web.Mvc.Ajax" />
				<add namespace="System.Web.Mvc.Html" />
				<add namespace="System.Web.Routing" />
				<add namespace="Blog.Helpers.Posts" />
				<add namespace="Blog.Helpers.Sidebar" />
				<add namespace="System.Web.Helpers" />
				<add namespace="System.Web.WebPages" />
			</namespaces>
		</pages>
	</system.web>

	<system.webServer>
        <modules runAllManagedModulesForAllRequests="true" />
        <!-- 2011-11-07 DWR: Need these in here for the web hosting to handle 404s and other errors correctly (trying to use a catch-all route
         that returns a page with a 404 status just confuses it so best to use this approach instead - with my hosting, at least) -->
        <httpErrors>
            <remove subStatusCode="-1" statusCode="500"/>
            <remove subStatusCode="-1" statusCode="502"/>
            <remove subStatusCode="-1" statusCode="404"/>
            <error prefixLanguageFilePath="" path="/NotFound404" responseMode="ExecuteURL" statusCode="500"/>
            <error prefixLanguageFilePath="" path="/NotFound404" responseMode="ExecuteURL" statusCode="502"/>
            <error prefixLanguageFilePath="" path="/NotFound404" responseMode="ExecuteURL" statusCode="404"/>
        </httpErrors>
        <validation validateIntegratedModeConfiguration="false" />
    </system.webServer>

	<runtime>
		<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
			</dependentAssembly>
		</assemblyBinding>
	</runtime>

	<appSettings>
		<add key="ClientValidationEnabled" value="false" />
		<add key="UnobtrusiveJavaScriptEnabled" value="false" />
	</appSettings>
</configuration>
